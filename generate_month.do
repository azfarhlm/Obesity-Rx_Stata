* ------ generate time (month) variable: t_rxbegmm (month begin taking medicine)

gen t_rxbeg = 1 if rxbegmm == 1 & rxbegyr == 2010 // initialize

local monthvar ///
"2	3	4	5	6	7	8	9	10	11	12	1	2	3	4	5	6	7	8	9	10	11	12	1	2	3	4	5	6	7	8	9	10	11	12	1	2	3	4	5	6	7	8	9	10	11	12	1	2	3	4	5	6	7	8	9	10	11	12	1	2	3	4	5	6	7	8	9	10	11	12	1	2	3	4	5	6	7	8	9	10	11	12	1	2	3	4	5	6	7	8	9	10	11	12	1	2	3	4	5	6	7	8	9	10	11	12	1	2	3	4	5	6	7	8	9	10	11	12	1	2	3	4	5	6	7	8	9	10	11	12"

local yearvar ///
"2010	2010	2010	2010	2010	2010	2010	2010	2010	2010	2010	2011	2011	2011	2011	2011	2011	2011	2011	2011	2011	2011	2011	2012	2012	2012	2012	2012	2012	2012	2012	2012	2012	2012	2012	2013	2013	2013	2013	2013	2013	2013	2013	2013	2013	2013	2013	2014	2014	2014	2014	2014	2014	2014	2014	2014	2014	2014	2014	2015	2015	2015	2015	2015	2015	2015	2015	2015	2015	2015	2015	2016	2016	2016	2016	2016	2016	2016	2016	2016	2016	2016	2016	2017	2017	2017	2017	2017	2017	2017	2017	2017	2017	2017	2017	2018	2018	2018	2018	2018	2018	2018	2018	2018	2018	2018	2018	2019	2019	2019	2019	2019	2019	2019	2019	2019	2019	2019	2019	2020	2020	2020	2020	2020	2020	2020	2020	2020	2020	2020	2020"

local n : word count `yearvar'

local j = 2

forvalues i = 1/`n'{
	local a : word `i' of `monthvar'
	local b : word `i' of `yearvar'
	replace t_rxbeg = `j++' if rxbegmm == `a' & rxbegyr == `b'
}

* ------- label time (month) variable
local monthvar ///
"2	3	4	5	6	7	8	9	10	11	12	1	2	3	4	5	6	7	8	9	10	11	12	1	2	3	4	5	6	7	8	9	10	11	12	1	2	3	4	5	6	7	8	9	10	11	12	1	2	3	4	5	6	7	8	9	10	11	12	1	2	3	4	5	6	7	8	9	10	11	12	1	2	3	4	5	6	7	8	9	10	11	12	1	2	3	4	5	6	7	8	9	10	11	12	1	2	3	4	5	6	7	8	9	10	11	12	1	2	3	4	5	6	7	8	9	10	11	12	1	2	3	4	5	6	7	8	9	10	11	12"

local yearvar ///
"2010	2010	2010	2010	2010	2010	2010	2010	2010	2010	2010	2011	2011	2011	2011	2011	2011	2011	2011	2011	2011	2011	2011	2012	2012	2012	2012	2012	2012	2012	2012	2012	2012	2012	2012	2013	2013	2013	2013	2013	2013	2013	2013	2013	2013	2013	2013	2014	2014	2014	2014	2014	2014	2014	2014	2014	2014	2014	2014	2015	2015	2015	2015	2015	2015	2015	2015	2015	2015	2015	2015	2016	2016	2016	2016	2016	2016	2016	2016	2016	2016	2016	2016	2017	2017	2017	2017	2017	2017	2017	2017	2017	2017	2017	2017	2018	2018	2018	2018	2018	2018	2018	2018	2018	2018	2018	2018	2019	2019	2019	2019	2019	2019	2019	2019	2019	2019	2019	2019	2020	2020	2020	2020	2020	2020	2020	2020	2020	2020	2020	2020"

local n : word count `yearvar'

local k = 1

forvalues i = 1/`n'{
	local a : word `i' of `monthvar'
	local b : word `i' of `yearvar'
	label define t_rxbeg_label `k++' "`a' `b'" , modify
}

label values t_rxbeg t_rxbeg_label

cd "$obesedrgdata"
save compile.dta, replace
cd "$obesedrg"
